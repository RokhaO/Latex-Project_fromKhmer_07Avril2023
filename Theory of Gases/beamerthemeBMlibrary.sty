\ProvidesPackage{beamerthemeBMlibrary}
%info
\usepackage{polyglossia}
\newfontfamily\khmerfont[Script=Khmer]{Khmer OS Muol Light}
\setdefaultlanguage[numerals=khmer]{khmer}
%title
\author[ស៊ុំ សំអុន]{រៀបរៀងដោយ៖ ស៊ុំ សំអុន}
\title[គណិតវិទ្យា]{\kbk លំហាត់ \en QCM \kbk ត្រៀមប្រឡងចូរសាលាតិចណូ}
\institute[រៀនគណិតវិទ្យាទាំងអស់គ្នា]{\kbk រៀនគណិតវិទ្យាទាំងអស់គ្នា}
\date{\today}
\everymath{\protect\displaystyle\protect\color{blue}}
\newcommand{\en}{\fontspec[Script=Khmer]{Times New Roman}}
\newcommand{\kml}{\fontspec[Script=Khmer]{Khmer OS Muol Light}}
\newcommand{\kbk}{\fontspec[Script=Khmer]{Khmer  OS Bokor}}
\newcommand{\kos}{\fontspec[Script=Khmer]{Khmer OS System}}
\newcommand{\kmb}{\fontspec[Script=Khmer]{Khmer OS Battambang}}
% math font
\RequirePackage{mathpazo}
\RequirePackage{amsmath}
\RequirePackage{amssymb}
\RequirePackage{amsthm}
\RequirePackage{mathtools}
%\RequirePackage{newpxmath}
%\RequirePackage{eulerpx}
\RequirePackage{mathastext}


\RequirePackage{unicode-math}
\setmathfont{Latin Modern Math}
\setmathfont{TeX Gyre Pagella Math}

%\setmathfont[range="222B]{Linux Libertine O}
\setmainfont[Ligatures=TeX,AutoFakeBold=0.25,AutoFakeSlant=0.25]{Khmer OS Content}% roman font
\setsansfont[Ligatures=TeX,AutoFakeBold=0.25,AutoFakeSlant=0.25]{Khmer OS Muol Light}% sans serif font
\setmonofont[Ligatures=TeX,AutoFakeBold=0.25,AutoFakeSlant=0.25]{Khmer OS Bokor}% typewriter font
\XeTeXlinebreaklocale "kh"% line break rule
\XeTeXlinebreakskip = 0pt plus 1pt minus 1pt% line break skip
\setmainfont [Scale = 0.8333333334, Script=Khmer]{Khmer OS Battambang}
\setmathrm{Times New Roman}
\newcommand{\koc}{\fontspec[Scale = 0.8333333334, Script=Khmer]{Khmer OS Content}\selectfont}
\newcommand{\kb}{\fontspec[Scale = 0.8333333334, Script=Khmer]{Khmer OS Battambang}\selectfont}
\newcommand{\mc}{\fontspec{Monotype Corsiva}\selectfont}
\setbeamertemplate{theorems}[numbered]
\newfontfamily{\tcfamily}[%
Script=Khmer,%
Ligatures=TeX,%
AutoFakeSlant=.25,%
AutoFakeBold=2]{Tacteing.ttf}
\DeclareTextFontCommand{\texttc}{\tcfamily}
\RequirePackage{mathpazo}
\RequirePackage{amsmath}
\RequirePackage{amssymb}
\RequirePackage{amsthm}
\RequirePackage{mathtools}
\usepackage[utf8]{inputenc}
\usefonttheme{professionalfonts}
\usepackage{varwidth}
\usepackage{pgfplots}
\pgfplotsset{/pgf/number format/use comma,compat=newest}
\usepackage{color}
\usepackage{amsmath,amsfonts,amssymb}
\usepackage{hyperref}
\usepackage{tikz}
\usepackage{enumerate}
\usepackage{fontspec}

\newif\if@khmer@numerals
\def\tmp@khmer{khmer}
\define@key{khmer}{numerals}[khmer]{%
	\def\@tmpa{#1}%
	\ifx\@tmpa\tmp@khmer\@khmer@numeralstrue%
	\else\@khmer@numeralsfalse\fi%
}
\setkeys{khmer}{numerals}
\def\captionskhmer{%
	\def\prefacename{អារម្ភកថា}%
	\def\refname{ឯកសារយោង}%
	\def\abstractname{សង្ខេប}%
	\def\bibname{គន្ថនិទ្ទេស}%
	\def\chaptername{ជំពូក}%
	\def\appendixname{សេចក្ដីបន្ថែម}%
	\def\contentsname{មាតិកា}%
	\def\listfigurename{បញ្ជីរូបភាព}%
	\def\listtablename{បញ្ជីតារាង}%
	\def\indexname{សន្ទស្សន៍}%
	\def\figurename{រូប}%
	\def\tablename{តារាង}%
	\def\partname{ផ្នែក}%
	\def\pagename{ទំព័រ}%
	\def\seename{មើល}%
	\def\alsoname{មើលបន្ថែម}%
	\def\enclname{ឯកសារភ្ជាប់}%
	\def\ccname{ចម្លងជួន}%
	\def\headtoname{ផ្ញើរទៅ}%
	\def\proofname{សម្រាយ}%
	\def\answername{ចម្លើយ}%
	\def\glossaryname{សទានុក្រម}%
}
\def\datekhmer{%
	\def\khmer@month{%
		\ifcase\month\or%
		មករា\or%
		កុម្ភៈ\or%
		មិនា\or%
		មេសា\or%
		ឧសភា\or%
		មិថុនា\or%
		កក្កដា\or%
		សីហា\or%
		កញ្ញា\or%
		តុលា\or%
		វិច្ឆិកា\or%
		ធ្នូ\fi}%
	\def\today{\khmernumber\day\space\khmer@month\space\khmernumber\year}%
}
\def\khmerdigits#1{\expandafter\@khmer@digits #1@}
\def\@khmer@digits#1{%
	\ifx @#1% then terminate
	\else\ifx0#1០%
	\else\ifx1#1១%
	\else\ifx2#1២%
	\else\ifx3#1៣%
	\else\ifx4#1៤%
	\else\ifx5#1៥%
	\else\ifx6#1៦%
	\else\ifx7#1៧%
	\else\ifx8#1៨%
	\else\ifx9#1៩%
	\else#1\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi
	\expandafter\@khmer@digits%
	\fi
}
\def\khmernumber#1{%
	\if@khmer@numerals%
	\khmerdigits{\number#1}%
	\else%
	\number#1%
	\fi}
\def\khmer@globalnumbers{%
	\let\orig@arabic\@arabic%
	\let\@arabic\khmernumber%
	\renewcommand{\thefootnote}{\protect\khmernumber{\c@footnote}}%
}
\def\nokhmer@globalnumbers{%
	\let\@arabic\orig@arabic%
	\renewcommand\thefootnote{\protect\number{\c@footnote}}%
}
\def\thepart{\arabic{part}}
\def\@khmeralph#1{%
	\ifcase#1%
	\or ក\or ខ\or គ\or ឃ\or ង%
	\or ច\or ឆ\or ជ\or ឈ\or ញ%
	\or ដ\or ឋ\or ឌ\or ឍ\or ណ%
	\or ត\or ថ\or ទ\or ធ\or ន%
	\or ប\or ផ\or ព\or ភ\or ម%
	\or យ\or រ\or ល\or វ\or ស\or ហ\or ឡ\or អ%
	\else\xpg@ill@value{#1}{@khmeralph}\fi}
\def\khmerAlph#1{\expandafter\@khmerAlph\csname c@#1\endcsname}
\def\@khmerAlph#1{%
	\ifcase#1%
	\or ក\or ខ\or គ\or ឃ\or ង%
	\or ច\or ឆ\or ជ\or ឈ\or ញ%
	\or ដ\or ឋ\or ឌ\or ឍ\or ណ%
	\or ត\or ថ\or ទ\or ធ\or ន%
	\or ប\or ផ\or ព\or ភ\or ម%
	\or យ\or រ\or ល\or វ\or ស\or ហ\or ឡ\or អ%
	\else\xpg@ill@value{#1}{@khmeralph}\fi}
\def\khmer@numbers{%
	\let\@latinalph\@alph%
	\let\@latinAlph\@Alph%
	\if@khmer@numerals
	\let\@alph\@khmeralph%
	\let\@Alph\@khmerAlph%
	\fi%
}
\def\nokhmer@numbers{%
	\let\@alph\@latinalph%
	\let\@Alph\@latinAlph%
}
\def\blockextras@khmer{%
	\XeTeXlinebreaklocale "kh"% 
	\XeTeXlinebreakskip = 0pt plus1pt minus1pt%
}
\def\noblockextras@khmer{% 
	\XeTeXlinebreaklocale "en"%
}
\@ifclassloaded{beamer}{%
	\mode<presentation>{
		\usefonttheme{professionalfonts}%
		\def\factname{ស្វ័យសត្យ}%
		\def\lemmaname{បទគន្លិះ}%
		\def\theoremname{ទ្រឹស្ដីបទ}%
		\def\corollaryname{អនុសាធ្យ}%
		\def\problemname{ចំណោទ}%
		\def\solutionname{ដំណោះស្រាយ}%
		\def\definitionname{និយមន័យ}%
		\def\examplename{លំហាត់ទី}%
		\uselanguage{khmer}%
		\languagepath{khmer}%
		\deftranslation[to=khmer]{Fact}{\factname}%
		\deftranslation[to=khmer]{Lemma}{\lemmaname}%
		\deftranslation[to=khmer]{Theorem}{\theoremname}%
		\deftranslation[to=khmer]{Corollary}{\corollaryname}%
		\deftranslation[to=khmer]{Problem}{\problemname}%
		\deftranslation[to=khmer]{Solution}{\solutionname}%
		\deftranslation[to=khmer]{Definition}{\definitionname}%
		\deftranslation[to=khmer]{Definitions}{\definitionname}%
		\deftranslation[to=khmer]{Example}{\examplename}%
		\deftranslation[to=khmer]{Examples}{\examplename}%
		\AtEndDocument{\immediate\write\@auxout{\string\@writefile{nav}%
				{\noexpand\headcommand{\noexpand\def\noexpand%
						\inserttotalframenumber{\noexpand\khmernumber{\the\c@framenumber}}}}}}%
	}%
}{}
\newenvironment{arabicnumerals}{\let\@arabic\orig@arabic}{\let\@arabic\khmernumber}
\newenvironment{khmernumerals}{\let\@arabic\khmernumber}{\let\@arabic\orig@arabic}
\endinput